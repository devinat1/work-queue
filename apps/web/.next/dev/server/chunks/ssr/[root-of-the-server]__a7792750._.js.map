{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/src/lib/auth-client.ts"],"sourcesContent":["\"use client\";\n\nimport { createAuthClient } from \"better-auth/react\";\n\nexport const authClient = createAuthClient({\n  baseURL: process.env.NEXT_PUBLIC_BETTER_AUTH_URL || \"http://localhost:3000\",\n});\n\nexport const { signIn, signUp, signOut, useSession } = authClient;\n"],"names":[],"mappings":";;;;;;;;;;;;AAEA;;;;;AAFA;;AAIO,MAAM,aAAa,IAAA,uNAAgB,EAAC;IACzC,SAAS,QAAQ,GAAG,CAAC,2BAA2B,IAAI;AACtD;AAEO,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG"}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/src/components/SignInForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { signIn } from \"@/lib/auth-client\";\nimport { useRouter } from \"next/router\";\n\nexport function SignInForm() {\n  const router = useRouter();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    setError(\"\");\n    setIsLoading(true);\n\n    try {\n      const result = await signIn.email({\n        email,\n        password,\n      });\n\n      if (result.error) {\n        setError(result.error.message || \"Failed to sign in\");\n        return;\n      }\n\n      router.push(\"/\");\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"An error occurred\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"flex flex-col gap-4 w-full max-w-sm\">\n      {error && (\n        <div className=\"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-500 text-red-700 dark:text-red-400 px-4 py-2 rounded\">\n          {error}\n        </div>\n      )}\n\n      <div className=\"flex flex-col gap-2\">\n        <label htmlFor=\"email\" className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n          Email\n        </label>\n        <input\n          id=\"email\"\n          type=\"email\"\n          value={email}\n          onChange={(event) => setEmail(event.target.value)}\n          required\n          className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100 dark:bg-gray-800\"\n          placeholder=\"you@example.com\"\n        />\n      </div>\n\n      <div className=\"flex flex-col gap-2\">\n        <label htmlFor=\"password\" className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n          Password\n        </label>\n        <input\n          id=\"password\"\n          type=\"password\"\n          value={password}\n          onChange={(event) => setPassword(event.target.value)}\n          required\n          className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100 dark:bg-gray-800\"\n          placeholder=\"Your password\"\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        disabled={isLoading}\n        className=\"bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n      >\n        {isLoading ? \"Signing in...\" : \"Sign In\"}\n      </button>\n    </form>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;AAJA;;;;;AAMO,SAAS;IACd,MAAM,SAAS,IAAA,oIAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+GAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+GAAQ,EAAC;IAE3C,MAAM,eAAe,OAAO;QAC1B,MAAM,cAAc;QACpB,SAAS;QACT,aAAa;QAEb,IAAI;YACF,MAAM,SAAS,MAAM,8IAAM,CAAC,KAAK,CAAC;gBAChC;gBACA;YACF;YAEA,IAAI,OAAO,KAAK,EAAE;gBAChB,SAAS,OAAO,KAAK,CAAC,OAAO,IAAI;gBACjC;YACF;YAEA,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAK;YACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,qKAAC;QAAK,UAAU;QAAc,WAAU;;YACrC,uBACC,qKAAC;gBAAI,WAAU;0BACZ;;;;;;0BAIL,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAM,SAAQ;wBAAQ,WAAU;kCAAuD;;;;;;kCAGxF,qKAAC;wBACC,IAAG;wBACH,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,QAAU,SAAS,MAAM,MAAM,CAAC,KAAK;wBAChD,QAAQ;wBACR,WAAU;wBACV,aAAY;;;;;;;;;;;;0BAIhB,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAM,SAAQ;wBAAW,WAAU;kCAAuD;;;;;;kCAG3F,qKAAC;wBACC,IAAG;wBACH,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,QAAU,YAAY,MAAM,MAAM,CAAC,KAAK;wBACnD,QAAQ;wBACR,WAAU;wBACV,aAAY;;;;;;;;;;;;0BAIhB,qKAAC;gBACC,MAAK;gBACL,UAAU;gBACV,WAAU;0BAET,YAAY,kBAAkB;;;;;;;;;;;;AAIvC"}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/packages/db-client/src/index.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\nimport { PrismaPg } from \"@prisma/adapter-pg\";\nimport { Pool } from \"pg\";\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nfunction createPrismaClient(): PrismaClient {\n  const connectionString = process.env.POSTGRES_PRISMA_URL;\n\n  if (!connectionString) {\n    throw new Error(\"POSTGRES_PRISMA_URL environment variable is required.\");\n  }\n\n  const pool = new Pool({ connectionString });\n  const adapter = new PrismaPg(pool);\n  return new PrismaClient({ adapter });\n}\n\nexport const prisma = globalForPrisma.prisma ?? createPrismaClient();\n\nif (process.env.NODE_ENV !== \"production\") {\n  globalForPrisma.prisma = prisma;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;AAEA,MAAM,kBAAkB;AAIxB,SAAS;IACP,MAAM,mBAAmB,QAAQ,GAAG,CAAC,mBAAmB;IAExD,IAAI,CAAC,kBAAkB;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,OAAO,IAAI,qJAAI,CAAC;QAAE;IAAiB;IACzC,MAAM,UAAU,IAAI,8NAAQ,CAAC;IAC7B,OAAO,IAAI,sMAAY,CAAC;QAAE;IAAQ;AACpC;AAEO,MAAM,SAAS,gBAAgB,MAAM,IAAI;AAEhD,wCAA2C;IACzC,gBAAgB,MAAM,GAAG;AAC3B"}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/src/lib/auth.ts"],"sourcesContent":["import { betterAuth } from \"better-auth\";\nimport { prismaAdapter } from \"better-auth/adapters/prisma\";\nimport { prisma } from \"@work-queue/db-client\";\n\nexport const auth = betterAuth({\n  database: prismaAdapter(prisma, {\n    provider: \"postgresql\",\n  }),\n  emailAndPassword: {\n    enabled: true,\n  },\n});\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;;AAEO,MAAM,OAAO,IAAA,+LAAU,EAAC;IAC7B,UAAU,IAAA,8OAAa,EAAC,2IAAM,EAAE;QAC9B,UAAU;IACZ;IACA,kBAAkB;QAChB,SAAS;IACX;AACF"}},
    {"offset": {"line": 272, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/helpers/api/auth.ts"],"sourcesContent":["import type { IncomingMessage } from \"http\";\nimport { auth } from \"@/lib/auth\";\nimport { prisma } from \"@work-queue/db-client\";\n\nfunction toHeaders({ req }: { req: IncomingMessage }): Headers {\n  const headerEntries: Record<string, string> = {};\n  for (const [key, value] of Object.entries(req.headers)) {\n    if (value) {\n      headerEntries[key] = Array.isArray(value) ? value.join(\", \") : value;\n    }\n  }\n  return new Headers(headerEntries);\n}\n\nexport async function getSession({ req }: { req: IncomingMessage }) {\n  const session = await auth.api.getSession({\n    headers: toHeaders({ req }),\n  });\n  return session;\n}\n\nexport async function requireAuth({ req }: { req: IncomingMessage }) {\n  const session = await getSession({ req });\n  if (!session) {\n    throw new Error(\"Unauthorized\");\n  }\n  return session;\n}\n\nexport async function requireQueueOwnership({\n  req,\n  shareToken,\n}: {\n  req: IncomingMessage;\n  shareToken: string;\n}) {\n  const session = await requireAuth({ req });\n\n  const queue = await prisma.queue.findUnique({\n    where: { shareToken },\n    select: { userId: true },\n  });\n\n  if (!queue) {\n    throw new Error(\"Queue not found\");\n  }\n\n  if (queue.userId !== session.user.id) {\n    throw new Error(\"Forbidden\");\n  }\n\n  return session;\n}\n\nexport async function isQueueOwner({\n  req,\n  shareToken,\n}: {\n  req: IncomingMessage;\n  shareToken: string;\n}): Promise<boolean> {\n  const session = await getSession({ req });\n  if (!session) {\n    return false;\n  }\n\n  const queue = await prisma.queue.findUnique({\n    where: { shareToken },\n    select: { userId: true },\n  });\n\n  if (!queue) {\n    return false;\n  }\n\n  return queue.userId === session.user.id;\n}\n"],"names":[],"mappings":";;;;;;;;;;AACA;AACA;;;;;;;;AAEA,SAAS,UAAU,EAAE,GAAG,EAA4B;IAClD,MAAM,gBAAwC,CAAC;IAC/C,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,IAAI,OAAO,EAAG;QACtD,IAAI,OAAO;YACT,aAAa,CAAC,IAAI,GAAG,MAAM,OAAO,CAAC,SAAS,MAAM,IAAI,CAAC,QAAQ;QACjE;IACF;IACA,OAAO,IAAI,QAAQ;AACrB;AAEO,eAAe,WAAW,EAAE,GAAG,EAA4B;IAChE,MAAM,UAAU,MAAM,kIAAI,CAAC,GAAG,CAAC,UAAU,CAAC;QACxC,SAAS,UAAU;YAAE;QAAI;IAC3B;IACA,OAAO;AACT;AAEO,eAAe,YAAY,EAAE,GAAG,EAA4B;IACjE,MAAM,UAAU,MAAM,WAAW;QAAE;IAAI;IACvC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAEO,eAAe,sBAAsB,EAC1C,GAAG,EACH,UAAU,EAIX;IACC,MAAM,UAAU,MAAM,YAAY;QAAE;IAAI;IAExC,MAAM,QAAQ,MAAM,2IAAM,CAAC,KAAK,CAAC,UAAU,CAAC;QAC1C,OAAO;YAAE;QAAW;QACpB,QAAQ;YAAE,QAAQ;QAAK;IACzB;IAEA,IAAI,CAAC,OAAO;QACV,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,MAAM,MAAM,KAAK,QAAQ,IAAI,CAAC,EAAE,EAAE;QACpC,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT;AAEO,eAAe,aAAa,EACjC,GAAG,EACH,UAAU,EAIX;IACC,MAAM,UAAU,MAAM,WAAW;QAAE;IAAI;IACvC,IAAI,CAAC,SAAS;QACZ,OAAO;IACT;IAEA,MAAM,QAAQ,MAAM,2IAAM,CAAC,KAAK,CAAC,UAAU,CAAC;QAC1C,OAAO;YAAE;QAAW;QACpB,QAAQ;YAAE,QAAQ;QAAK;IACzB;IAEA,IAAI,CAAC,OAAO;QACV,OAAO;IACT;IAEA,OAAO,MAAM,MAAM,KAAK,QAAQ,IAAI,CAAC,EAAE;AACzC"}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/pages/sign-in.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport Head from \"next/head\";\nimport type { GetServerSideProps } from \"next\";\nimport { SignInForm } from \"@/components/SignInForm\";\nimport { getSession } from \"@helpers/api/auth\";\n\nexport const getServerSideProps: GetServerSideProps = async ({ req }) => {\n  const session = await getSession({ req });\n\n  if (session) {\n    return { redirect: { destination: \"/\", permanent: false } };\n  }\n\n  return { props: {} };\n};\n\nexport default function SignInPage() {\n  return (\n    <>\n      <Head>\n        <title>Sign In - Queue Manager</title>\n      </Head>\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-950\">\n        <div className=\"bg-white dark:bg-gray-900 p-8 rounded-lg shadow-md w-full max-w-md\">\n          <div className=\"text-center mb-6\">\n            <div className=\"text-2xl font-bold text-gray-900 dark:text-gray-100\">\n              Sign In\n            </div>\n            <div className=\"text-gray-600 dark:text-gray-400 mt-1\">\n              Welcome back to Queue\n            </div>\n          </div>\n\n          <SignInForm />\n\n          <div className=\"mt-6 text-center text-sm text-gray-600 dark:text-gray-400\">\n            <span>Don&apos;t have an account? </span>\n            <Link href=\"/sign-up\" className=\"text-blue-600 hover:underline\">\n              Sign up\n            </Link>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAEA;AACA;;;;;;;;;;;AAEO,MAAM,qBAAyC,OAAO,EAAE,GAAG,EAAE;IAClE,MAAM,UAAU,MAAM,IAAA,4IAAU,EAAC;QAAE;IAAI;IAEvC,IAAI,SAAS;QACX,OAAO;YAAE,UAAU;gBAAE,aAAa;gBAAK,WAAW;YAAM;QAAE;IAC5D;IAEA,OAAO;QAAE,OAAO,CAAC;IAAE;AACrB;AAEe,SAAS;IACtB,qBACE;;0BACE,qKAAC,gIAAI;0BACH,cAAA,qKAAC;8BAAM;;;;;;;;;;;0BAET,qKAAC;gBAAI,WAAU;0BACb,cAAA,qKAAC;oBAAI,WAAU;;sCACb,qKAAC;4BAAI,WAAU;;8CACb,qKAAC;oCAAI,WAAU;8CAAsD;;;;;;8CAGrE,qKAAC;oCAAI,WAAU;8CAAwC;;;;;;;;;;;;sCAKzD,qKAAC,sJAAU;;;;;sCAEX,qKAAC;4BAAI,WAAU;;8CACb,qKAAC;8CAAK;;;;;;8CACN,qKAAC,gIAAI;oCAAC,MAAK;oCAAW,WAAU;8CAAgC;;;;;;;;;;;;;;;;;;;;;;;;;AAQ5E"}}]
}