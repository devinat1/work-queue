{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/packages/db-client/src/index.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\nimport { PrismaPg } from \"@prisma/adapter-pg\";\nimport { Pool } from \"pg\";\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nfunction createPrismaClient(): PrismaClient {\n  const connectionString = process.env.POSTGRES_PRISMA_URL;\n\n  if (!connectionString) {\n    throw new Error(\"POSTGRES_PRISMA_URL environment variable is required.\");\n  }\n\n  const pool = new Pool({ connectionString });\n  const adapter = new PrismaPg(pool);\n  return new PrismaClient({ adapter });\n}\n\nexport const prisma = globalForPrisma.prisma ?? createPrismaClient();\n\nif (process.env.NODE_ENV !== \"production\") {\n  globalForPrisma.prisma = prisma;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;AAEA,MAAM,kBAAkB;AAIxB,SAAS;IACP,MAAM,mBAAmB,QAAQ,GAAG,CAAC,mBAAmB;IAExD,IAAI,CAAC,kBAAkB;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,OAAO,IAAI,qJAAI,CAAC;QAAE;IAAiB;IACzC,MAAM,UAAU,IAAI,8NAAQ,CAAC;IAC7B,OAAO,IAAI,sMAAY,CAAC;QAAE;IAAQ;AACpC;AAEO,MAAM,SAAS,gBAAgB,MAAM,IAAI;AAEhD,wCAA2C;IACzC,gBAAgB,MAAM,GAAG;AAC3B"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/src/components/CreateQueueForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/router\";\n\nexport function CreateQueueForm() {\n  const [queueName, setQueueName] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const router = useRouter();\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    setErrorMessage(\"\");\n\n    if (queueName.trim().length === 0) {\n      setErrorMessage(\"Queue name is required.\");\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      const response = await fetch(\"/api/queues\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ name: queueName }),\n      });\n\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.error || \"Failed to create queue.\");\n      }\n\n      const queue = await response.json();\n      router.push(`/q/${queue.shareToken}`);\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : \"Failed to create queue.\";\n      setErrorMessage(message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"flex flex-col gap-4\">\n      <div className=\"flex gap-2\">\n        <input\n          type=\"text\"\n          value={queueName}\n          onChange={(event) => setQueueName(event.target.value)}\n          placeholder=\"Enter queue name...\"\n          className=\"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent placeholder:text-gray-400 dark:placeholder:text-gray-500 text-gray-900 dark:text-gray-100 dark:bg-gray-800\"\n          disabled={isLoading}\n        />\n        <button\n          type=\"submit\"\n          disabled={isLoading}\n          className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n        >\n          {isLoading ? \"Creating...\" : \"Create Queue\"}\n        </button>\n      </div>\n      {errorMessage.length > 0 ? (\n        <div className=\"text-red-500 dark:text-red-400 text-sm\">{errorMessage}</div>\n      ) : null}\n    </form>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKO,SAAS;IACd,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+GAAQ,EAAC;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+GAAQ,EAAC;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,+GAAQ,EAAC;IACjD,MAAM,SAAS,IAAA,oIAAS;IAExB,MAAM,eAAe,OAAO;QAC1B,MAAM,cAAc;QACpB,gBAAgB;QAEhB,IAAI,UAAU,IAAI,GAAG,MAAM,KAAK,GAAG;YACjC,gBAAgB;YAChB;QACF;QAEA,aAAa;QAEb,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,eAAe;gBAC1C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,MAAM;gBAAU;YACzC;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAChC;YAEA,MAAM,QAAQ,MAAM,SAAS,IAAI;YACjC,OAAO,IAAI,CAAC,CAAC,GAAG,EAAE,MAAM,UAAU,EAAE;QACtC,EAAE,OAAO,OAAO;YACd,MAAM,UACJ,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAC3C,gBAAgB;QAClB,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,qKAAC;QAAK,UAAU;QAAc,WAAU;;0BACtC,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBACC,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,QAAU,aAAa,MAAM,MAAM,CAAC,KAAK;wBACpD,aAAY;wBACZ,WAAU;wBACV,UAAU;;;;;;kCAEZ,qKAAC;wBACC,MAAK;wBACL,UAAU;wBACV,WAAU;kCAET,YAAY,gBAAgB;;;;;;;;;;;;YAGhC,aAAa,MAAM,GAAG,kBACrB,qKAAC;gBAAI,WAAU;0BAA0C;;;;;uBACvD;;;;;;;AAGV"}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/src/components/QueueCard.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport type { Queue } from \"@work-queue/types\";\n\ninterface QueueCardProps {\n  queue: Queue;\n  onDelete: (shareToken: string) => void;\n}\n\nexport function QueueCard({ queue, onDelete }: QueueCardProps) {\n  const handleDelete = async (event: React.MouseEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const isConfirmed = window.confirm(\n      `Are you sure you want to delete \"${queue.name}\"? This will also delete all items in the queue.`\n    );\n\n    if (!isConfirmed) {\n      return;\n    }\n\n    try {\n      const response = await fetch(`/api/queues/${queue.shareToken}`, {\n        method: \"DELETE\",\n      });\n\n      if (response.ok) {\n        onDelete(queue.shareToken);\n      }\n    } catch (error) {\n      console.error(\"Failed to delete queue.\", error);\n    }\n  };\n\n  return (\n    <Link href={`/q/${queue.shareToken}`} className=\"block\">\n      <div className=\"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:border-blue-400 hover:shadow-md dark:hover:shadow-gray-900/50 transition-all bg-white dark:bg-gray-900\">\n        <div className=\"flex items-center justify-between gap-4\">\n          <div className=\"font-medium text-gray-900 dark:text-gray-100 truncate min-w-0\">\n            {queue.name}\n          </div>\n          <button\n            onClick={handleDelete}\n            className=\"p-2 text-gray-400 dark:text-gray-500 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors\"\n            title=\"Delete queue\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"w-5 h-5\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n              />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </Link>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUO,SAAS,UAAU,EAAE,KAAK,EAAE,QAAQ,EAAkB;IAC3D,MAAM,eAAe,OAAO;QAC1B,MAAM,cAAc;QACpB,MAAM,eAAe;QAErB,MAAM,cAAc,OAAO,OAAO,CAChC,CAAC,iCAAiC,EAAE,MAAM,IAAI,CAAC,gDAAgD,CAAC;QAGlG,IAAI,CAAC,aAAa;YAChB;QACF;QAEA,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,CAAC,YAAY,EAAE,MAAM,UAAU,EAAE,EAAE;gBAC9D,QAAQ;YACV;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,SAAS,MAAM,UAAU;YAC3B;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QAC3C;IACF;IAEA,qBACE,qKAAC,gIAAI;QAAC,MAAM,CAAC,GAAG,EAAE,MAAM,UAAU,EAAE;QAAE,WAAU;kBAC9C,cAAA,qKAAC;YAAI,WAAU;sBACb,cAAA,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAI,WAAU;kCACZ,MAAM,IAAI;;;;;;kCAEb,qKAAC;wBACC,SAAS;wBACT,WAAU;wBACV,OAAM;kCAEN,cAAA,qKAAC;4BACC,OAAM;4BACN,WAAU;4BACV,MAAK;4BACL,SAAQ;4BACR,QAAO;sCAEP,cAAA,qKAAC;gCACC,eAAc;gCACd,gBAAe;gCACf,aAAa;gCACb,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQlB"}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/src/components/QueueListHome.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { QueueCard } from \"./QueueCard\";\nimport type { Queue } from \"@work-queue/types\";\n\ninterface QueueListHomeProps {\n  initialQueues: Queue[];\n}\n\nexport function QueueListHome({ initialQueues }: QueueListHomeProps) {\n  const [queues, setQueues] = useState<Queue[]>(initialQueues);\n\n  const handleDelete = (shareToken: string) => {\n    setQueues((currentQueues) =>\n      currentQueues.filter((queue) => queue.shareToken !== shareToken)\n    );\n  };\n\n  if (queues.length === 0) {\n    return (\n      <div className=\"text-center py-12 text-gray-500 dark:text-gray-400\">\n        <div className=\"text-lg\">No queues yet</div>\n        <div className=\"text-sm\">Create your first queue above</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col gap-4\">\n      {queues.map((queue) => (\n        <QueueCard key={queue.id} queue={queue} onDelete={handleDelete} />\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAUO,SAAS,cAAc,EAAE,aAAa,EAAsB;IACjE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAU;IAE9C,MAAM,eAAe,CAAC;QACpB,UAAU,CAAC,gBACT,cAAc,MAAM,CAAC,CAAC,QAAU,MAAM,UAAU,KAAK;IAEzD;IAEA,IAAI,OAAO,MAAM,KAAK,GAAG;QACvB,qBACE,qKAAC;YAAI,WAAU;;8BACb,qKAAC;oBAAI,WAAU;8BAAU;;;;;;8BACzB,qKAAC;oBAAI,WAAU;8BAAU;;;;;;;;;;;;IAG/B;IAEA,qBACE,qKAAC;QAAI,WAAU;kBACZ,OAAO,GAAG,CAAC,CAAC,sBACX,qKAAC,oJAAS;gBAAgB,OAAO;gBAAO,UAAU;eAAlC,MAAM,EAAE;;;;;;;;;;AAIhC"}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/src/lib/auth-client.ts"],"sourcesContent":["\"use client\";\n\nimport { createAuthClient } from \"better-auth/react\";\n\nexport const authClient = createAuthClient({\n  baseURL: process.env.NEXT_PUBLIC_BETTER_AUTH_URL || \"http://localhost:3000\",\n});\n\nexport const { signIn, signUp, signOut, useSession } = authClient;\n"],"names":[],"mappings":";;;;;;;;;;;;AAEA;;;;;AAFA;;AAIO,MAAM,aAAa,IAAA,uNAAgB,EAAC;IACzC,SAAS,QAAQ,GAAG,CAAC,2BAA2B,IAAI;AACtD;AAEO,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG"}},
    {"offset": {"line": 357, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/src/components/ThemeToggle.tsx"],"sourcesContent":["\"use client\";\n\nimport { useTheme } from \"./ThemeProvider\";\n\nexport function ThemeToggle() {\n  const { theme, toggleTheme } = useTheme();\n\n  return (\n    <button\n      onClick={toggleTheme}\n      className=\"p-2 rounded-lg text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 transition-colors\"\n      title={theme === \"dark\" ? \"Switch to light mode\" : \"Switch to dark mode\"}\n    >\n      {theme === \"dark\" ? (\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          className=\"w-5 h-5\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\"\n          />\n        </svg>\n      ) : (\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          className=\"w-5 h-5\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\"\n          />\n        </svg>\n      )}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,IAAA,uJAAQ;IAEvC,qBACE,qKAAC;QACC,SAAS;QACT,WAAU;QACV,OAAO,UAAU,SAAS,yBAAyB;kBAElD,UAAU,uBACT,qKAAC;YACC,OAAM;YACN,WAAU;YACV,MAAK;YACL,SAAQ;YACR,QAAO;sBAEP,cAAA,qKAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,aAAa;gBACb,GAAE;;;;;;;;;;iCAIN,qKAAC;YACC,OAAM;YACN,WAAU;YACV,MAAK;YACL,SAAQ;YACR,QAAO;sBAEP,cAAA,qKAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,aAAa;gBACb,GAAE;;;;;;;;;;;;;;;;AAMd"}},
    {"offset": {"line": 425, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/src/components/UserMenu.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { signOut } from \"@/lib/auth-client\";\nimport { useRouter } from \"next/router\";\nimport { ThemeToggle } from \"./ThemeToggle\";\n\ninterface UserMenuProps {\n  userName: string;\n  userEmail: string;\n}\n\nexport function UserMenu({ userName, userEmail }: UserMenuProps) {\n  const router = useRouter();\n  const [isOpen, setIsOpen] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSignOut = async () => {\n    setIsLoading(true);\n    try {\n      await signOut();\n      router.push(\"/sign-in\");\n    } catch (error) {\n      console.error(\"Failed to sign out:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800\"\n      >\n        <div className=\"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-medium\">\n          {userName.charAt(0).toUpperCase()}\n        </div>\n        <span className=\"text-sm text-gray-700 dark:text-gray-300\">{userName}</span>\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-900 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 z-10\">\n          <div className=\"px-4 py-3 border-b border-gray-200 dark:border-gray-700\">\n            <div className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{userName}</div>\n            <div className=\"text-xs text-gray-500 dark:text-gray-400\">{userEmail}</div>\n          </div>\n          <div className=\"flex items-center justify-between px-4 py-2 border-b border-gray-200 dark:border-gray-700\">\n            <span className=\"text-sm text-gray-700 dark:text-gray-300\">Theme</span>\n            <ThemeToggle />\n          </div>\n          <button\n            onClick={handleSignOut}\n            disabled={isLoading}\n            className=\"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50\"\n          >\n            {isLoading ? \"Signing out...\" : \"Sign out\"}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;;;AALA;;;;;;AAYO,SAAS,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAiB;IAC7D,MAAM,SAAS,IAAA,oIAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAC;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+GAAQ,EAAC;IAE3C,MAAM,gBAAgB;QACpB,aAAa;QACb,IAAI;YACF,MAAM,IAAA,+IAAO;YACb,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,uBAAuB;QACvC,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;gBACC,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAU;;kCAEV,qKAAC;wBAAI,WAAU;kCACZ,SAAS,MAAM,CAAC,GAAG,WAAW;;;;;;kCAEjC,qKAAC;wBAAK,WAAU;kCAA4C;;;;;;;;;;;;YAG7D,wBACC,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAI,WAAU;;0CACb,qKAAC;gCAAI,WAAU;0CAAwD;;;;;;0CACvE,qKAAC;gCAAI,WAAU;0CAA4C;;;;;;;;;;;;kCAE7D,qKAAC;wBAAI,WAAU;;0CACb,qKAAC;gCAAK,WAAU;0CAA2C;;;;;;0CAC3D,qKAAC,wJAAW;;;;;;;;;;;kCAEd,qKAAC;wBACC,SAAS;wBACT,UAAU;wBACV,WAAU;kCAET,YAAY,mBAAmB;;;;;;;;;;;;;;;;;;AAM5C"}},
    {"offset": {"line": 568, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/src/lib/auth.ts"],"sourcesContent":["import { betterAuth } from \"better-auth\";\nimport { prismaAdapter } from \"better-auth/adapters/prisma\";\nimport { prisma } from \"@work-queue/db-client\";\n\nexport const auth = betterAuth({\n  database: prismaAdapter(prisma, {\n    provider: \"postgresql\",\n  }),\n  emailAndPassword: {\n    enabled: true,\n  },\n});\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;;AAEO,MAAM,OAAO,IAAA,+LAAU,EAAC;IAC7B,UAAU,IAAA,8OAAa,EAAC,2IAAM,EAAE;QAC9B,UAAU;IACZ;IACA,kBAAkB;QAChB,SAAS;IACX;AACF"}},
    {"offset": {"line": 599, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/src/lib/auth-helpers.ts"],"sourcesContent":["import type { IncomingMessage } from \"http\";\nimport { auth } from \"./auth\";\nimport { prisma } from \"@work-queue/db-client\";\n\nfunction toHeaders({ req }: { req: IncomingMessage }): Headers {\n  const headerEntries: Record<string, string> = {};\n  for (const [key, value] of Object.entries(req.headers)) {\n    if (value) {\n      headerEntries[key] = Array.isArray(value) ? value.join(\", \") : value;\n    }\n  }\n  return new Headers(headerEntries);\n}\n\nexport async function getSession({ req }: { req: IncomingMessage }) {\n  const session = await auth.api.getSession({\n    headers: toHeaders({ req }),\n  });\n  return session;\n}\n\nexport async function requireAuth({ req }: { req: IncomingMessage }) {\n  const session = await getSession({ req });\n  if (!session) {\n    throw new Error(\"Unauthorized\");\n  }\n  return session;\n}\n\nexport async function requireQueueOwnership({\n  req,\n  shareToken,\n}: {\n  req: IncomingMessage;\n  shareToken: string;\n}) {\n  const session = await requireAuth({ req });\n\n  const queue = await prisma.queue.findUnique({\n    where: { shareToken },\n    select: { userId: true },\n  });\n\n  if (!queue) {\n    throw new Error(\"Queue not found\");\n  }\n\n  if (queue.userId !== session.user.id) {\n    throw new Error(\"Forbidden\");\n  }\n\n  return session;\n}\n\nexport async function isQueueOwner({\n  req,\n  shareToken,\n}: {\n  req: IncomingMessage;\n  shareToken: string;\n}): Promise<boolean> {\n  const session = await getSession({ req });\n  if (!session) {\n    return false;\n  }\n\n  const queue = await prisma.queue.findUnique({\n    where: { shareToken },\n    select: { userId: true },\n  });\n\n  if (!queue) {\n    return false;\n  }\n\n  return queue.userId === session.user.id;\n}\n"],"names":[],"mappings":";;;;;;;;;;AACA;AACA;;;;;;;;AAEA,SAAS,UAAU,EAAE,GAAG,EAA4B;IAClD,MAAM,gBAAwC,CAAC;IAC/C,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,IAAI,OAAO,EAAG;QACtD,IAAI,OAAO;YACT,aAAa,CAAC,IAAI,GAAG,MAAM,OAAO,CAAC,SAAS,MAAM,IAAI,CAAC,QAAQ;QACjE;IACF;IACA,OAAO,IAAI,QAAQ;AACrB;AAEO,eAAe,WAAW,EAAE,GAAG,EAA4B;IAChE,MAAM,UAAU,MAAM,kIAAI,CAAC,GAAG,CAAC,UAAU,CAAC;QACxC,SAAS,UAAU;YAAE;QAAI;IAC3B;IACA,OAAO;AACT;AAEO,eAAe,YAAY,EAAE,GAAG,EAA4B;IACjE,MAAM,UAAU,MAAM,WAAW;QAAE;IAAI;IACvC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAEO,eAAe,sBAAsB,EAC1C,GAAG,EACH,UAAU,EAIX;IACC,MAAM,UAAU,MAAM,YAAY;QAAE;IAAI;IAExC,MAAM,QAAQ,MAAM,2IAAM,CAAC,KAAK,CAAC,UAAU,CAAC;QAC1C,OAAO;YAAE;QAAW;QACpB,QAAQ;YAAE,QAAQ;QAAK;IACzB;IAEA,IAAI,CAAC,OAAO;QACV,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,MAAM,MAAM,KAAK,QAAQ,IAAI,CAAC,EAAE,EAAE;QACpC,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT;AAEO,eAAe,aAAa,EACjC,GAAG,EACH,UAAU,EAIX;IACC,MAAM,UAAU,MAAM,WAAW;QAAE;IAAI;IACvC,IAAI,CAAC,SAAS;QACZ,OAAO;IACT;IAEA,MAAM,QAAQ,MAAM,2IAAM,CAAC,KAAK,CAAC,UAAU,CAAC;QAC1C,OAAO;YAAE;QAAW;QACpB,QAAQ;YAAE,QAAQ;QAAK;IACzB;IAEA,IAAI,CAAC,OAAO;QACV,OAAO;IACT;IAEA,OAAO,MAAM,MAAM,KAAK,QAAQ,IAAI,CAAC,EAAE;AACzC"}},
    {"offset": {"line": 691, "column": 0}, "map": {"version":3,"sources":["file:///Users/devinat1/Desktop/projects/work-queue/apps/web/pages/index.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport Head from \"next/head\";\nimport type { GetServerSideProps } from \"next\";\nimport { prisma } from \"@work-queue/db-client\";\nimport type { Queue } from \"@work-queue/types\";\nimport { CreateQueueForm } from \"@/components/CreateQueueForm\";\nimport { QueueListHome } from \"@/components/QueueListHome\";\nimport { UserMenu } from \"@/components/UserMenu\";\nimport { ThemeToggle } from \"@/components/ThemeToggle\";\nimport { getSession } from \"@/lib/auth-helpers\";\n\ninterface HomeProps {\n  isAuthenticated: boolean;\n  queues: Queue[];\n  userName?: string | null;\n  userEmail?: string | null;\n}\n\nexport const getServerSideProps: GetServerSideProps<HomeProps> = async ({\n  req,\n}) => {\n  const session = await getSession({ req });\n\n  if (!session) {\n    return { props: { isAuthenticated: false, queues: [] } };\n  }\n\n  const queues = await prisma.queue.findMany({\n    where: {\n      userId: session.user.id,\n    },\n    include: {\n      _count: {\n        select: { items: true },\n      },\n    },\n    orderBy: { createdAt: \"desc\" },\n  });\n\n  return {\n    props: {\n      isAuthenticated: true,\n      queues: JSON.parse(JSON.stringify(queues)),\n      userName: session.user.name,\n      userEmail: session.user.email,\n    },\n  };\n};\n\nexport default function Home({\n  isAuthenticated,\n  queues,\n  userName,\n  userEmail,\n}: HomeProps) {\n  if (!isAuthenticated) {\n    return (\n      <>\n        <Head>\n          <title>Queue Manager</title>\n          <meta\n            name=\"description\"\n            content=\"Manage your work queues and share them with others\"\n          />\n        </Head>\n        <div className=\"min-h-screen bg-gray-50 dark:bg-gray-950\">\n          <div className=\"max-w-2xl mx-auto px-4 py-12\">\n            <div className=\"flex flex-col gap-8 items-center text-center\">\n              <div className=\"flex flex-col gap-2\">\n                <div className=\"text-3xl font-bold text-gray-900 dark:text-gray-100\">\n                  Queue\n                </div>\n                <div className=\"text-gray-600 dark:text-gray-400\">\n                  Track and share your work queues\n                </div>\n              </div>\n\n              <div className=\"flex gap-4 items-center\">\n                <Link\n                  href=\"/sign-in\"\n                  className=\"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium\"\n                >\n                  Sign In\n                </Link>\n                <Link\n                  href=\"/sign-up\"\n                  className=\"px-6 py-3 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 font-medium\"\n                >\n                  Create Account\n                </Link>\n                <ThemeToggle />\n              </div>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Head>\n        <title>My Queues - Queue Manager</title>\n        <meta\n          name=\"description\"\n          content=\"Manage your work queues and share them with others\"\n        />\n      </Head>\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-950\">\n        <div className=\"max-w-2xl mx-auto px-4 py-12\">\n          <div className=\"flex flex-col gap-8\">\n            <div className=\"flex justify-between items-start\">\n              <div className=\"flex flex-col gap-2\">\n                <div className=\"text-3xl font-bold text-gray-900 dark:text-gray-100\">\n                  My Queues\n                </div>\n                <div className=\"text-gray-600 dark:text-gray-400\">\n                  Create and manage your work queues\n                </div>\n              </div>\n              <UserMenu\n                userName={userName ?? \"\"}\n                userEmail={userEmail ?? \"\"}\n              />\n            </div>\n\n            <CreateQueueForm />\n\n            <div className=\"flex flex-col gap-4\">\n              <div className=\"text-lg font-medium text-gray-700 dark:text-gray-300\">\n                Your Queues\n              </div>\n              <QueueListHome initialQueues={queues} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AASO,MAAM,qBAAoD,OAAO,EACtE,GAAG,EACJ;IACC,MAAM,UAAU,MAAM,IAAA,mJAAU,EAAC;QAAE;IAAI;IAEvC,IAAI,CAAC,SAAS;QACZ,OAAO;YAAE,OAAO;gBAAE,iBAAiB;gBAAO,QAAQ,EAAE;YAAC;QAAE;IACzD;IAEA,MAAM,SAAS,MAAM,2IAAM,CAAC,KAAK,CAAC,QAAQ,CAAC;QACzC,OAAO;YACL,QAAQ,QAAQ,IAAI,CAAC,EAAE;QACzB;QACA,SAAS;YACP,QAAQ;gBACN,QAAQ;oBAAE,OAAO;gBAAK;YACxB;QACF;QACA,SAAS;YAAE,WAAW;QAAO;IAC/B;IAEA,OAAO;QACL,OAAO;YACL,iBAAiB;YACjB,QAAQ,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC;YAClC,UAAU,QAAQ,IAAI,CAAC,IAAI;YAC3B,WAAW,QAAQ,IAAI,CAAC,KAAK;QAC/B;IACF;AACF;AAEe,SAAS,KAAK,EAC3B,eAAe,EACf,MAAM,EACN,QAAQ,EACR,SAAS,EACC;IACV,IAAI,CAAC,iBAAiB;QACpB,qBACE;;8BACE,qKAAC,gIAAI;;sCACH,qKAAC;sCAAM;;;;;;sCACP,qKAAC;4BACC,MAAK;4BACL,SAAQ;;;;;;;;;;;;8BAGZ,qKAAC;oBAAI,WAAU;8BACb,cAAA,qKAAC;wBAAI,WAAU;kCACb,cAAA,qKAAC;4BAAI,WAAU;;8CACb,qKAAC;oCAAI,WAAU;;sDACb,qKAAC;4CAAI,WAAU;sDAAsD;;;;;;sDAGrE,qKAAC;4CAAI,WAAU;sDAAmC;;;;;;;;;;;;8CAKpD,qKAAC;oCAAI,WAAU;;sDACb,qKAAC,gIAAI;4CACH,MAAK;4CACL,WAAU;sDACX;;;;;;sDAGD,qKAAC,gIAAI;4CACH,MAAK;4CACL,WAAU;sDACX;;;;;;sDAGD,qKAAC,wJAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAO1B;IAEA,qBACE;;0BACE,qKAAC,gIAAI;;kCACH,qKAAC;kCAAM;;;;;;kCACP,qKAAC;wBACC,MAAK;wBACL,SAAQ;;;;;;;;;;;;0BAGZ,qKAAC;gBAAI,WAAU;0BACb,cAAA,qKAAC;oBAAI,WAAU;8BACb,cAAA,qKAAC;wBAAI,WAAU;;0CACb,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAI,WAAU;;0DACb,qKAAC;gDAAI,WAAU;0DAAsD;;;;;;0DAGrE,qKAAC;gDAAI,WAAU;0DAAmC;;;;;;;;;;;;kDAIpD,qKAAC,kJAAQ;wCACP,UAAU,YAAY;wCACtB,WAAW,aAAa;;;;;;;;;;;;0CAI5B,qKAAC,gKAAe;;;;;0CAEhB,qKAAC;gCAAI,WAAU;;kDACb,qKAAC;wCAAI,WAAU;kDAAuD;;;;;;kDAGtE,qKAAC,4JAAa;wCAAC,eAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO5C"}}]
}